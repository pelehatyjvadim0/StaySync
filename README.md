StaySync - API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–µ–ª–µ–π

–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: –í –ü–†–û–¶–ï–°–°–ï –†–ê–ó–†–ê–ë–û–¢–ö–ò

 StaySync - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ FastAPI, —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–æ–º–µ—Ä–æ–≤ –≤ –æ—Ç–µ–ª—è—Ö. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Å—Ç–µ–∫–æ–º Python –∏ –≥–ª—É–±–æ–∫—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å PostgreSQL.
 
üöÄ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

  –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å—Ç–µ–∫ (FastAPI, SQLAlchemy 2.0, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö).

  –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT (Access/Refresh tokens) —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ HttpOnly Cookies.

  –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ–≤–µ—Ä–±—É–∫–∏–Ω–≥–∞: –õ–æ–≥–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Å–ª–æ–∂–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã (CTE), –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—â–∏–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π.

  –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Celery –∏ Redis –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—è–∂–µ–ª—ã—Ö –∑–∞–¥–∞—á (—Ä–∞—Å—Å—ã–ª–∫–∞ –ø–∏—Å–µ–º, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤).

  –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: –ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –∏ Docker Compose –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

  –ú–∏–≥—Ä–∞—Ü–∏–∏: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î —á–µ—Ä–µ–∑ Alembic.

üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

  –Ø–∑—ã–∫: Python 3.12+

  –§—Ä–µ–π–º–≤–æ—Ä–∫: FastAPI

  –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL (SQLAlchemy 2.0 ORM)

  –ú–∏–≥—Ä–∞—Ü–∏–∏: Alembic

  –ö—ç—à/–û—á–µ—Ä–µ–¥–∏: Redis + Celery

  –í–∞–ª–∏–¥–∞—Ü–∏—è: Pydantic v2

  –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: Docker, Docker Compose

üì¶ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (App, DB, Redis, Celery) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
Bash

docker compose up --build

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000 
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger: http://localhost:8000/docs

üìä –ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–∞–±–æ—Ç—ã —Å –ë–î:

  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è EXPLAIN ANALYZE –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

  –ü–æ–Ω–∏–º–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤: MVCC, —Ä–∞–±–æ—Ç–∞ WAL –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ shared_buffers.

  –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã N+1 —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ (selectinload).
